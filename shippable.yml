#set your language below
language: node_js

node_js:
  - 12.0.0

build:
  pre_ci_boot:
    image_name: drydock/u14nod
    image_tag: prod
    pull: true
  env:
    - XUNIT_FILE=coverage/clover.xml
  ci:
    - npm install
    - npm run lint
    - npm run pack
    - npm run test
  post_ci:
    cross-env NODE_ENV=test ./node_modules/.bin/istanbul cover
    --report lcov --report json --report text --report html _mocha -- --ui bdd
    --reporter spec --colors --compilers js:babel-core/register server/tests --recursive
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules